// Code generated by the Pulumi Terraform Bridge (tfgen) Tool DO NOT EDIT.
// *** WARNING: Do not edit by hand unless you're certain you know what you are doing! ***

package xenorchestra

import (
	"context"
	"reflect"

	"errors"
	"github.com/pulumi/pulumi/sdk/v3/go/pulumi"
	"github.com/vatesfr/pulumi-xenorchestra/sdk/v2/go/xenorchestra/internal"
)

// A resource for managing Bonded Xen Orchestra networks. See the XCP-ng [networking docs](https://xcp-ng.org/docs/networking.html) for more details.
//
// ## Example Usage
//
// ```go
// package main
//
// import (
//
//	"github.com/pulumi/pulumi/sdk/v3/go/pulumi"
//	"github.com/vatesfr/pulumi-xenorchestra/sdk/v2/go/xenorchestra"
//
// )
//
//	func main() {
//		pulumi.Run(func(ctx *pulumi.Context) error {
//			host1, err := xenorchestra.GetXoaHost(ctx, &xenorchestra.GetXoaHostArgs{
//				NameLabel: "Your host",
//			}, nil)
//			if err != nil {
//				return err
//			}
//			eth1, err := xenorchestra.GetXoaPif(ctx, &xenorchestra.GetXoaPifArgs{
//				Device: "eth1",
//				Vlan:   -1,
//				HostId: pulumi.StringRef(host1.Id),
//			}, nil)
//			if err != nil {
//				return err
//			}
//			eth2, err := xenorchestra.GetXoaPif(ctx, &xenorchestra.GetXoaPifArgs{
//				Device: "eth2",
//				Vlan:   -1,
//				HostId: pulumi.StringRef(host1.Id),
//			}, nil)
//			if err != nil {
//				return err
//			}
//			// Create a bonded network from normal PIFs
//			_, err = xenorchestra.NewXoaBondedNetwork(ctx, "network", &xenorchestra.XoaBondedNetworkArgs{
//				NameLabel: pulumi.String("new network name"),
//				BondMode:  pulumi.String("active-backup"),
//				PoolId:    pulumi.String(host1.PoolId),
//				PifIds: pulumi.StringArray{
//					pulumi.String(eth1.Id),
//					pulumi.String(eth2.Id),
//				},
//			})
//			if err != nil {
//				return err
//			}
//			// Create a bonded network from PIFs on VLANs
//			eth1Vlan, err := xenorchestra.GetXoaPif(ctx, &xenorchestra.GetXoaPifArgs{
//				Device: "eth1",
//				Vlan:   15,
//				HostId: pulumi.StringRef(host1.Id),
//			}, nil)
//			if err != nil {
//				return err
//			}
//			eth2Vlan, err := xenorchestra.GetXoaPif(ctx, &xenorchestra.GetXoaPifArgs{
//				Device: "eth2",
//				Vlan:   15,
//				HostId: pulumi.StringRef(host1.Id),
//			}, nil)
//			if err != nil {
//				return err
//			}
//			// Create a bonded network from normal PIFs
//			_, err = xenorchestra.NewXoaBondedNetwork(ctx, "network_vlan", &xenorchestra.XoaBondedNetworkArgs{
//				NameLabel: pulumi.String("new network name"),
//				BondMode:  pulumi.String("active-backup"),
//				PoolId:    pulumi.String(host1.PoolId),
//				PifIds: pulumi.StringArray{
//					pulumi.String(eth1Vlan.Id),
//					pulumi.String(eth2Vlan.Id),
//				},
//			})
//			if err != nil {
//				return err
//			}
//			return nil
//		})
//	}
//
// ```
type XoaBondedNetwork struct {
	pulumi.CustomResourceState

	Automatic pulumi.BoolPtrOutput `pulumi:"automatic"`
	// The bond mode that should be used for this network.
	BondMode pulumi.StringPtrOutput `pulumi:"bondMode"`
	// This argument controls whether the network should enforce VIF locking. This defaults to `false` which means that no filtering rules are applied.
	DefaultIsLocked pulumi.BoolPtrOutput `pulumi:"defaultIsLocked"`
	// The MTU of the network. Defaults to `1500` if unspecified.
	Mtu             pulumi.IntPtrOutput    `pulumi:"mtu"`
	NameDescription pulumi.StringPtrOutput `pulumi:"nameDescription"`
	// The name label of the network.
	NameLabel pulumi.StringOutput `pulumi:"nameLabel"`
	// The pifs (uuid) that should be used for this network.
	PifIds pulumi.StringArrayOutput `pulumi:"pifIds"`
	// The pool id that this network should belong to.
	PoolId pulumi.StringOutput `pulumi:"poolId"`
}

// NewXoaBondedNetwork registers a new resource with the given unique name, arguments, and options.
func NewXoaBondedNetwork(ctx *pulumi.Context,
	name string, args *XoaBondedNetworkArgs, opts ...pulumi.ResourceOption) (*XoaBondedNetwork, error) {
	if args == nil {
		return nil, errors.New("missing one or more required arguments")
	}

	if args.NameLabel == nil {
		return nil, errors.New("invalid value for required argument 'NameLabel'")
	}
	if args.PoolId == nil {
		return nil, errors.New("invalid value for required argument 'PoolId'")
	}
	aliases := pulumi.Aliases([]pulumi.Alias{
		{
			Type: pulumi.String("xenorchestra:index/bondedNetwork:BondedNetwork"),
		},
	})
	opts = append(opts, aliases)
	opts = internal.PkgResourceDefaultOpts(opts)
	var resource XoaBondedNetwork
	err := ctx.RegisterResource("xenorchestra:index/xoaBondedNetwork:XoaBondedNetwork", name, args, &resource, opts...)
	if err != nil {
		return nil, err
	}
	return &resource, nil
}

// GetXoaBondedNetwork gets an existing XoaBondedNetwork resource's state with the given name, ID, and optional
// state properties that are used to uniquely qualify the lookup (nil if not required).
func GetXoaBondedNetwork(ctx *pulumi.Context,
	name string, id pulumi.IDInput, state *XoaBondedNetworkState, opts ...pulumi.ResourceOption) (*XoaBondedNetwork, error) {
	var resource XoaBondedNetwork
	err := ctx.ReadResource("xenorchestra:index/xoaBondedNetwork:XoaBondedNetwork", name, id, state, &resource, opts...)
	if err != nil {
		return nil, err
	}
	return &resource, nil
}

// Input properties used for looking up and filtering XoaBondedNetwork resources.
type xoaBondedNetworkState struct {
	Automatic *bool `pulumi:"automatic"`
	// The bond mode that should be used for this network.
	BondMode *string `pulumi:"bondMode"`
	// This argument controls whether the network should enforce VIF locking. This defaults to `false` which means that no filtering rules are applied.
	DefaultIsLocked *bool `pulumi:"defaultIsLocked"`
	// The MTU of the network. Defaults to `1500` if unspecified.
	Mtu             *int    `pulumi:"mtu"`
	NameDescription *string `pulumi:"nameDescription"`
	// The name label of the network.
	NameLabel *string `pulumi:"nameLabel"`
	// The pifs (uuid) that should be used for this network.
	PifIds []string `pulumi:"pifIds"`
	// The pool id that this network should belong to.
	PoolId *string `pulumi:"poolId"`
}

type XoaBondedNetworkState struct {
	Automatic pulumi.BoolPtrInput
	// The bond mode that should be used for this network.
	BondMode pulumi.StringPtrInput
	// This argument controls whether the network should enforce VIF locking. This defaults to `false` which means that no filtering rules are applied.
	DefaultIsLocked pulumi.BoolPtrInput
	// The MTU of the network. Defaults to `1500` if unspecified.
	Mtu             pulumi.IntPtrInput
	NameDescription pulumi.StringPtrInput
	// The name label of the network.
	NameLabel pulumi.StringPtrInput
	// The pifs (uuid) that should be used for this network.
	PifIds pulumi.StringArrayInput
	// The pool id that this network should belong to.
	PoolId pulumi.StringPtrInput
}

func (XoaBondedNetworkState) ElementType() reflect.Type {
	return reflect.TypeOf((*xoaBondedNetworkState)(nil)).Elem()
}

type xoaBondedNetworkArgs struct {
	Automatic *bool `pulumi:"automatic"`
	// The bond mode that should be used for this network.
	BondMode *string `pulumi:"bondMode"`
	// This argument controls whether the network should enforce VIF locking. This defaults to `false` which means that no filtering rules are applied.
	DefaultIsLocked *bool `pulumi:"defaultIsLocked"`
	// The MTU of the network. Defaults to `1500` if unspecified.
	Mtu             *int    `pulumi:"mtu"`
	NameDescription *string `pulumi:"nameDescription"`
	// The name label of the network.
	NameLabel string `pulumi:"nameLabel"`
	// The pifs (uuid) that should be used for this network.
	PifIds []string `pulumi:"pifIds"`
	// The pool id that this network should belong to.
	PoolId string `pulumi:"poolId"`
}

// The set of arguments for constructing a XoaBondedNetwork resource.
type XoaBondedNetworkArgs struct {
	Automatic pulumi.BoolPtrInput
	// The bond mode that should be used for this network.
	BondMode pulumi.StringPtrInput
	// This argument controls whether the network should enforce VIF locking. This defaults to `false` which means that no filtering rules are applied.
	DefaultIsLocked pulumi.BoolPtrInput
	// The MTU of the network. Defaults to `1500` if unspecified.
	Mtu             pulumi.IntPtrInput
	NameDescription pulumi.StringPtrInput
	// The name label of the network.
	NameLabel pulumi.StringInput
	// The pifs (uuid) that should be used for this network.
	PifIds pulumi.StringArrayInput
	// The pool id that this network should belong to.
	PoolId pulumi.StringInput
}

func (XoaBondedNetworkArgs) ElementType() reflect.Type {
	return reflect.TypeOf((*xoaBondedNetworkArgs)(nil)).Elem()
}

type XoaBondedNetworkInput interface {
	pulumi.Input

	ToXoaBondedNetworkOutput() XoaBondedNetworkOutput
	ToXoaBondedNetworkOutputWithContext(ctx context.Context) XoaBondedNetworkOutput
}

func (*XoaBondedNetwork) ElementType() reflect.Type {
	return reflect.TypeOf((**XoaBondedNetwork)(nil)).Elem()
}

func (i *XoaBondedNetwork) ToXoaBondedNetworkOutput() XoaBondedNetworkOutput {
	return i.ToXoaBondedNetworkOutputWithContext(context.Background())
}

func (i *XoaBondedNetwork) ToXoaBondedNetworkOutputWithContext(ctx context.Context) XoaBondedNetworkOutput {
	return pulumi.ToOutputWithContext(ctx, i).(XoaBondedNetworkOutput)
}

// XoaBondedNetworkArrayInput is an input type that accepts XoaBondedNetworkArray and XoaBondedNetworkArrayOutput values.
// You can construct a concrete instance of `XoaBondedNetworkArrayInput` via:
//
//	XoaBondedNetworkArray{ XoaBondedNetworkArgs{...} }
type XoaBondedNetworkArrayInput interface {
	pulumi.Input

	ToXoaBondedNetworkArrayOutput() XoaBondedNetworkArrayOutput
	ToXoaBondedNetworkArrayOutputWithContext(context.Context) XoaBondedNetworkArrayOutput
}

type XoaBondedNetworkArray []XoaBondedNetworkInput

func (XoaBondedNetworkArray) ElementType() reflect.Type {
	return reflect.TypeOf((*[]*XoaBondedNetwork)(nil)).Elem()
}

func (i XoaBondedNetworkArray) ToXoaBondedNetworkArrayOutput() XoaBondedNetworkArrayOutput {
	return i.ToXoaBondedNetworkArrayOutputWithContext(context.Background())
}

func (i XoaBondedNetworkArray) ToXoaBondedNetworkArrayOutputWithContext(ctx context.Context) XoaBondedNetworkArrayOutput {
	return pulumi.ToOutputWithContext(ctx, i).(XoaBondedNetworkArrayOutput)
}

// XoaBondedNetworkMapInput is an input type that accepts XoaBondedNetworkMap and XoaBondedNetworkMapOutput values.
// You can construct a concrete instance of `XoaBondedNetworkMapInput` via:
//
//	XoaBondedNetworkMap{ "key": XoaBondedNetworkArgs{...} }
type XoaBondedNetworkMapInput interface {
	pulumi.Input

	ToXoaBondedNetworkMapOutput() XoaBondedNetworkMapOutput
	ToXoaBondedNetworkMapOutputWithContext(context.Context) XoaBondedNetworkMapOutput
}

type XoaBondedNetworkMap map[string]XoaBondedNetworkInput

func (XoaBondedNetworkMap) ElementType() reflect.Type {
	return reflect.TypeOf((*map[string]*XoaBondedNetwork)(nil)).Elem()
}

func (i XoaBondedNetworkMap) ToXoaBondedNetworkMapOutput() XoaBondedNetworkMapOutput {
	return i.ToXoaBondedNetworkMapOutputWithContext(context.Background())
}

func (i XoaBondedNetworkMap) ToXoaBondedNetworkMapOutputWithContext(ctx context.Context) XoaBondedNetworkMapOutput {
	return pulumi.ToOutputWithContext(ctx, i).(XoaBondedNetworkMapOutput)
}

type XoaBondedNetworkOutput struct{ *pulumi.OutputState }

func (XoaBondedNetworkOutput) ElementType() reflect.Type {
	return reflect.TypeOf((**XoaBondedNetwork)(nil)).Elem()
}

func (o XoaBondedNetworkOutput) ToXoaBondedNetworkOutput() XoaBondedNetworkOutput {
	return o
}

func (o XoaBondedNetworkOutput) ToXoaBondedNetworkOutputWithContext(ctx context.Context) XoaBondedNetworkOutput {
	return o
}

func (o XoaBondedNetworkOutput) Automatic() pulumi.BoolPtrOutput {
	return o.ApplyT(func(v *XoaBondedNetwork) pulumi.BoolPtrOutput { return v.Automatic }).(pulumi.BoolPtrOutput)
}

// The bond mode that should be used for this network.
func (o XoaBondedNetworkOutput) BondMode() pulumi.StringPtrOutput {
	return o.ApplyT(func(v *XoaBondedNetwork) pulumi.StringPtrOutput { return v.BondMode }).(pulumi.StringPtrOutput)
}

// This argument controls whether the network should enforce VIF locking. This defaults to `false` which means that no filtering rules are applied.
func (o XoaBondedNetworkOutput) DefaultIsLocked() pulumi.BoolPtrOutput {
	return o.ApplyT(func(v *XoaBondedNetwork) pulumi.BoolPtrOutput { return v.DefaultIsLocked }).(pulumi.BoolPtrOutput)
}

// The MTU of the network. Defaults to `1500` if unspecified.
func (o XoaBondedNetworkOutput) Mtu() pulumi.IntPtrOutput {
	return o.ApplyT(func(v *XoaBondedNetwork) pulumi.IntPtrOutput { return v.Mtu }).(pulumi.IntPtrOutput)
}

func (o XoaBondedNetworkOutput) NameDescription() pulumi.StringPtrOutput {
	return o.ApplyT(func(v *XoaBondedNetwork) pulumi.StringPtrOutput { return v.NameDescription }).(pulumi.StringPtrOutput)
}

// The name label of the network.
func (o XoaBondedNetworkOutput) NameLabel() pulumi.StringOutput {
	return o.ApplyT(func(v *XoaBondedNetwork) pulumi.StringOutput { return v.NameLabel }).(pulumi.StringOutput)
}

// The pifs (uuid) that should be used for this network.
func (o XoaBondedNetworkOutput) PifIds() pulumi.StringArrayOutput {
	return o.ApplyT(func(v *XoaBondedNetwork) pulumi.StringArrayOutput { return v.PifIds }).(pulumi.StringArrayOutput)
}

// The pool id that this network should belong to.
func (o XoaBondedNetworkOutput) PoolId() pulumi.StringOutput {
	return o.ApplyT(func(v *XoaBondedNetwork) pulumi.StringOutput { return v.PoolId }).(pulumi.StringOutput)
}

type XoaBondedNetworkArrayOutput struct{ *pulumi.OutputState }

func (XoaBondedNetworkArrayOutput) ElementType() reflect.Type {
	return reflect.TypeOf((*[]*XoaBondedNetwork)(nil)).Elem()
}

func (o XoaBondedNetworkArrayOutput) ToXoaBondedNetworkArrayOutput() XoaBondedNetworkArrayOutput {
	return o
}

func (o XoaBondedNetworkArrayOutput) ToXoaBondedNetworkArrayOutputWithContext(ctx context.Context) XoaBondedNetworkArrayOutput {
	return o
}

func (o XoaBondedNetworkArrayOutput) Index(i pulumi.IntInput) XoaBondedNetworkOutput {
	return pulumi.All(o, i).ApplyT(func(vs []interface{}) *XoaBondedNetwork {
		return vs[0].([]*XoaBondedNetwork)[vs[1].(int)]
	}).(XoaBondedNetworkOutput)
}

type XoaBondedNetworkMapOutput struct{ *pulumi.OutputState }

func (XoaBondedNetworkMapOutput) ElementType() reflect.Type {
	return reflect.TypeOf((*map[string]*XoaBondedNetwork)(nil)).Elem()
}

func (o XoaBondedNetworkMapOutput) ToXoaBondedNetworkMapOutput() XoaBondedNetworkMapOutput {
	return o
}

func (o XoaBondedNetworkMapOutput) ToXoaBondedNetworkMapOutputWithContext(ctx context.Context) XoaBondedNetworkMapOutput {
	return o
}

func (o XoaBondedNetworkMapOutput) MapIndex(k pulumi.StringInput) XoaBondedNetworkOutput {
	return pulumi.All(o, k).ApplyT(func(vs []interface{}) *XoaBondedNetwork {
		return vs[0].(map[string]*XoaBondedNetwork)[vs[1].(string)]
	}).(XoaBondedNetworkOutput)
}

func init() {
	pulumi.RegisterInputType(reflect.TypeOf((*XoaBondedNetworkInput)(nil)).Elem(), &XoaBondedNetwork{})
	pulumi.RegisterInputType(reflect.TypeOf((*XoaBondedNetworkArrayInput)(nil)).Elem(), XoaBondedNetworkArray{})
	pulumi.RegisterInputType(reflect.TypeOf((*XoaBondedNetworkMapInput)(nil)).Elem(), XoaBondedNetworkMap{})
	pulumi.RegisterOutputType(XoaBondedNetworkOutput{})
	pulumi.RegisterOutputType(XoaBondedNetworkArrayOutput{})
	pulumi.RegisterOutputType(XoaBondedNetworkMapOutput{})
}
